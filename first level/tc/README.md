[Вернуться к оглавлению](https://github.com/engine-it-in/different-level-task/blob/main/README.md)
***
* [Test Containers](#test-containers)
  * [Кейс для тестирования](#кейс-для-тестирования)
    * [Решение с JUnit5](#решение-с-junit)
    * [Статьи](#статьи)
***

# Test Containers

* Позволяющий работать с контейнерами во время исполнения теста; 
* Полезен при тестах источников данных, вызываемых в коде приложения:
  * NoSql;
  * Sql;
  * Keycloak;
  * Kafka
* Используется с JUnit;

## Кейс для тестирования
* Существует источник с JPA репозиторием, работу которого следует проверить;

### Решение с JUnit

* Пометить класс аннотацией `@TestContainers`;
* Добавить поле контейнера требуемого типа: 
  * `@Containers` - статическое - будет подниматься в начале первого теста и 
  останавливаться в конце последнего теста, 
  иначе - будет подниматься/останавливаться в начале/конце каждого теста соответственно);
* Инициализировать контекст `@EnableAutoConfiguration`
* В тестах использовать репозиторий и проверять его работу;

### Статьи
* https://www.baeldung.com/spring-boot-testcontainers-integration-test
* https://www.testcontainers.org/test_framework_integration/junit_5/